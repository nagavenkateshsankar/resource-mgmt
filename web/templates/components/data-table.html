{{define "data-table"}}
<div class="data-table-container">
    {{if .ShowHeader}}
    <div class="data-table-header">
        {{if .Title}}
        <h3 class="data-table-title">{{.Title}}</h3>
        {{end}}
        {{if .Actions}}
        <div class="data-table-actions">
            {{range .Actions}}
            <button type="button" class="btn {{.Class}}" {{if .Action}}data-action="{{.Action}}"{{end}}>
                {{.Text}}
            </button>
            {{end}}
        </div>
        {{end}}
    </div>
    {{end}}
    
    {{if .ShowFilters}}
    <div class="data-table-filters">
        <div class="filter-row">
            {{if .SearchEnabled}}
            <div class="filter-search">
                <input type="text" class="form-control form-control-sm" placeholder="{{if .SearchPlaceholder}}{{.SearchPlaceholder}}{{else}}Search...{{end}}" id="{{.ID}}_search">
            </div>
            {{end}}
            {{range .Filters}}
            <div class="filter-item">
                <select class="form-control form-control-sm" id="{{$.ID}}_filter_{{.Key}}">
                    <option value="">{{.Placeholder}}</option>
                    {{range .Options}}
                    <option value="{{.Value}}">{{.Text}}</option>
                    {{end}}
                </select>
            </div>
            {{end}}
            {{if .ShowFilters}}
            <div class="filter-actions">
                <button type="button" class="btn btn-sm btn-primary" data-action="apply-filters">Apply</button>
                <button type="button" class="btn btn-sm btn-secondary" data-action="clear-filters">Clear</button>
            </div>
            {{end}}
        </div>
    </div>
    {{end}}
    
    <div class="data-table-wrapper">
        <table class="data-table {{if .Striped}}table-striped{{end}} {{if .Hover}}table-hover{{end}} {{if .Bordered}}table-bordered{{end}}" id="{{.ID}}">
            <thead class="data-table-head">
                <tr>
                    {{if .SelectionEnabled}}
                    <th class="select-column">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="{{.ID}}_select_all">
                            <label for="{{.ID}}_select_all" class="form-check-label sr-only">Select All</label>
                        </div>
                    </th>
                    {{end}}
                    {{range .Columns}}
                    <th class="{{if .Sortable}}sortable{{end}} {{if .Class}}{{.Class}}{{end}}" {{if .Width}}style="width: {{.Width}}"{{end}} {{if .Sortable}}data-sort="{{.Key}}"{{end}}>
                        {{.Title}}
                        {{if .Sortable}}
                        <span class="sort-indicator">
                            <span class="sort-asc">â†‘</span>
                            <span class="sort-desc">â†“</span>
                        </span>
                        {{end}}
                    </th>
                    {{end}}
                    {{if .ShowActions}}
                    <th class="actions-column">Actions</th>
                    {{end}}
                </tr>
            </thead>
            <tbody class="data-table-body">
                {{if .LoadingState}}
                <tr class="loading-row">
                    <td colspan="{{len .Columns}}{{if .SelectionEnabled}} + 1{{end}}{{if .ShowActions}} + 1{{end}}" class="text-center">
                        <div class="loading-spinner"></div>
                        <p>{{if .LoadingMessage}}{{.LoadingMessage}}{{else}}Loading data...{{end}}</p>
                    </td>
                </tr>
                {{else if .EmptyState}}
                <tr class="empty-row">
                    <td colspan="{{len .Columns}}{{if .SelectionEnabled}} + 1{{end}}{{if .ShowActions}} + 1{{end}}" class="text-center">
                        <div class="empty-state">
                            <div class="empty-icon">ðŸ“‹</div>
                            <p class="empty-message">{{if .EmptyMessage}}{{.EmptyMessage}}{{else}}No data available{{end}}</p>
                            {{if .EmptyAction}}
                            <button type="button" class="btn btn-primary" data-action="{{.EmptyAction.Action}}">
                                {{.EmptyAction.Text}}
                            </button>
                            {{end}}
                        </div>
                    </td>
                </tr>
                {{else}}
                <!-- Data rows will be populated by JavaScript -->
                {{end}}
            </tbody>
        </table>
    </div>
    
    {{if .ShowPagination}}
    <div class="data-table-pagination">
        <div class="pagination-info">
            <span class="pagination-text">
                Showing <span id="{{.ID}}_start">1</span> to <span id="{{.ID}}_end">10</span> of <span id="{{.ID}}_total">0</span> entries
            </span>
        </div>
        <nav class="pagination-nav">
            <ul class="pagination pagination-sm">
                <li class="page-item" id="{{.ID}}_prev">
                    <a class="page-link" href="#" data-page="prev" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li class="page-item active" id="{{.ID}}_page_1">
                    <a class="page-link" href="#" data-page="1">1</a>
                </li>
                <li class="page-item" id="{{.ID}}_next">
                    <a class="page-link" href="#" data-page="next" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
    {{end}}
</div>
{{end}}