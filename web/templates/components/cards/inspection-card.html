{{define "inspection-card"}}
<div class="inspection-card {{if .Class}}{{.Class}}{{end}}" data-inspection-id="{{.ID}}">
    <div class="inspection-card-header">
        <div class="inspection-info">
            <h4 class="inspection-title">{{.Title}}</h4>
            <p class="inspection-location">
                üìç {{.Location}}
            </p>
        </div>
        <div class="inspection-status">
            <span class="status-badge status-{{.Status}}">{{.StatusText}}</span>
            {{if .Priority}}
            <span class="priority-badge priority-{{.Priority}}">{{.PriorityText}}</span>
            {{end}}
        </div>
    </div>
    
    <div class="inspection-card-body">
        {{if .Description}}
        <p class="inspection-description">{{.Description}}</p>
        {{end}}
        
        <div class="inspection-meta">
            <div class="meta-item">
                <span class="meta-label">Template:</span>
                <span class="meta-value">{{.Template}}</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Assigned:</span>
                <span class="meta-value">{{.Assignee}}</span>
            </div>
            {{if .DueDate}}
            <div class="meta-item">
                <span class="meta-label">Due:</span>
                <span class="meta-value {{if .Overdue}}overdue{{end}}">{{.DueDate}}</span>
            </div>
            {{end}}
            {{if .CompletedDate}}
            <div class="meta-item">
                <span class="meta-label">Completed:</span>
                <span class="meta-value">{{.CompletedDate}}</span>
            </div>
            {{end}}
        </div>
        
        {{if .Progress}}
        <div class="inspection-progress">
            <div class="progress-label">
                <span>Progress</span>
                <span>{{.Progress}}%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: {{.Progress}}%"></div>
            </div>
        </div>
        {{end}}
        
        {{if .Tags}}
        <div class="inspection-tags">
            {{range .Tags}}
            <span class="tag">{{.}}</span>
            {{end}}
        </div>
        {{end}}
    </div>
    
    <div class="inspection-card-footer">
        <div class="inspection-actions">
            {{if eq .Status "draft"}}
            <button type="button" class="btn btn-sm btn-primary" data-action="continue-inspection" data-inspection-id="{{.ID}}">
                ‚úèÔ∏è Continue
            </button>
            {{else if eq .Status "in_progress"}}
            <button type="button" class="btn btn-sm btn-primary" data-action="continue-inspection" data-inspection-id="{{.ID}}">
                üìù Continue
            </button>
            {{else}}
            <button type="button" class="btn btn-sm btn-secondary" data-action="view-inspection" data-inspection-id="{{.ID}}">
                üëÅÔ∏è View
            </button>
            {{end}}
            
            <button type="button" class="btn btn-sm btn-secondary" data-action="share-inspection" data-inspection-id="{{.ID}}">
                üì§ Share
            </button>
            
            {{if .CanEdit}}
            <div class="dropdown">
                <button type="button" class="btn btn-sm btn-secondary dropdown-toggle" data-toggle="dropdown">
                    ‚öôÔ∏è
                </button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#" data-action="edit-inspection" data-inspection-id="{{.ID}}">Edit</a>
                    <a class="dropdown-item" href="#" data-action="duplicate-inspection" data-inspection-id="{{.ID}}">Duplicate</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item text-danger" href="#" data-action="delete-inspection" data-inspection-id="{{.ID}}">Delete</a>
                </div>
            </div>
            {{end}}
        </div>
        
        {{if .LastActivity}}
        <div class="inspection-activity">
            <small class="text-muted">{{.LastActivity}}</small>
        </div>
        {{end}}
    </div>
</div>
{{end}}