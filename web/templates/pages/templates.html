{{define "page-content"}}
<!-- Templates Page -->
<div id="templates-page" class="page active">
    <div class="page-header">
        <div class="page-header-content">
            <div>
                <h2>Templates</h2>
                <p class="page-description">Create and manage inspection form templates</p>
            </div>
            <div class="page-header-actions">
                <button class="btn btn-secondary" data-action="import-template">
                    📥 Import
                </button>
                <button class="btn btn-primary" data-action="open-template-builder">
                    ✏️ Create Template
                </button>
            </div>
        </div>
    </div>
    
    <!-- Template Stats -->
    <div class="component-grid grid-cols-4 component-spacing-lg">
        {{template "stat-card" dict
            "ID" "total-templates-card"
            "Icon" "📋"
            "IconColor" "primary"
            "Value" "0"
            "ValueColor" "primary"
            "Label" "Total Templates"
            "Trend" (dict "Direction" "neutral" "Value" "")
        }}
        
        {{template "stat-card" dict
            "ID" "active-templates-card"
            "Icon" "✅"
            "IconColor" "success"
            "Value" "0"
            "ValueColor" "success"
            "Label" "Active Templates"
            "Trend" (dict "Direction" "up" "Value" "3")
        }}
        
        {{template "stat-card" dict
            "ID" "draft-templates-card"
            "Icon" "📝"
            "IconColor" "warning"
            "Value" "0"
            "ValueColor" "warning"
            "Label" "Draft Templates"
            "Trend" (dict "Direction" "neutral" "Value" "")
        }}
        
        {{template "stat-card" dict
            "ID" "template-usage-card"
            "Icon" "📊"
            "IconColor" "info"
            "Value" "0"
            "ValueColor" "info"
            "Label" "This Month Usage"
            "Trend" (dict "Direction" "up" "Value" "15%")
        }}
    </div>

    <!-- Filter and Search -->
    <div class="template-filters card">
        <div class="template-filter-row">
            <div class="search-box">
                <input type="text" id="template-search" placeholder="Search templates..." class="form-control">
                <span class="search-icon">🔍</span>
            </div>
            
            <div class="filter-group">
                <select id="category-filter" class="form-control">
                    <option value="">All Categories</option>
                    <option value="safety">Safety</option>
                    <option value="quality">Quality</option>
                    <option value="environmental">Environmental</option>
                    <option value="equipment">Equipment</option>
                    <option value="maintenance">Maintenance</option>
                    <option value="compliance">Compliance</option>
                    <option value="commercial">Commercial</option>
                </select>
            </div>
            
            <div class="filter-group">
                <select id="status-filter" class="form-control">
                    <option value="">All Status</option>
                    <option value="active">Active</option>
                    <option value="draft">Draft</option>
                    <option value="archived">Archived</option>
                </select>
            </div>
            
            <div class="view-toggle">
                <button class="btn btn-sm" id="grid-view-btn" title="Grid View">⊞</button>
                <button class="btn btn-sm active" id="list-view-btn" title="List View">☰</button>
            </div>
        </div>
    </div>

    <!-- Template Library Categories -->
    <div class="template-categories">
        <h3>Template Categories</h3>
        <div class="category-grid">
            <div class="category-card" data-category="safety">
                <div class="category-icon">🦺</div>
                <div class="category-name">Safety</div>
                <div class="category-count">0 templates</div>
            </div>
            <div class="category-card" data-category="quality">
                <div class="category-icon">✅</div>
                <div class="category-name">Quality</div>
                <div class="category-count">0 templates</div>
            </div>
            <div class="category-card" data-category="environmental">
                <div class="category-icon">🌱</div>
                <div class="category-name">Environmental</div>
                <div class="category-count">0 templates</div>
            </div>
            <div class="category-card" data-category="equipment">
                <div class="category-icon">⚙️</div>
                <div class="category-name">Equipment</div>
                <div class="category-count">0 templates</div>
            </div>
            <div class="category-card" data-category="maintenance">
                <div class="category-icon">🔧</div>
                <div class="category-name">Maintenance</div>
                <div class="category-count">0 templates</div>
            </div>
            <div class="category-card" data-category="compliance">
                <div class="category-icon">📋</div>
                <div class="category-name">Compliance</div>
                <div class="category-count">0 templates</div>
            </div>
        </div>
    </div>

    <!-- Templates List/Grid -->
    <div class="templates-container">
        <div class="templates-header">
            <h3>Your Templates</h3>
            <div class="templates-actions">
                <button class="btn btn-sm btn-secondary" data-action="export-templates">
                    📤 Export All
                </button>
                <button class="btn btn-sm btn-secondary" data-action="template-settings">
                    ⚙️ Settings
                </button>
            </div>
        </div>
        
        <div id="templates-list" class="templates-list list-view">
            <!-- Templates will be loaded here -->
            <div class="templates-loading">
                <div class="loading-spinner"></div>
                <p>Loading templates...</p>
            </div>
        </div>
        
        <div id="templates-empty" class="component-empty" style="display: none;">
            <div class="component-empty-icon">📋</div>
            <div class="component-empty-message">No Templates Found</div>
            <div class="component-empty-description">
                Start by creating your first inspection template
            </div>
            <button class="btn btn-primary" data-action="open-template-builder">
                ✏️ Create Your First Template
            </button>
        </div>
    </div>

    <!-- Recent Activity -->
    {{template "base-card" dict
        "ShowHeader" true
        "Title" "📊 Template Activity"
        "HeaderActions" (list
            (dict "Text" "View All" "Class" "btn-sm btn-secondary" "Action" "view-template-activity")
        )
        "Content" `<div id="template-activity" class="activity-feed">
            <!-- Activity will be populated by JavaScript -->
        </div>`
    }}
</div>

<!-- Template Card Template (for JavaScript rendering) -->
<script type="text/template" id="template-card-template">
    <div class="template-card" data-template-id="{id}">
        <div class="template-card-header">
            <div class="template-category {category}">{category}</div>
            <div class="template-actions">
                <button class="btn-icon" data-action="duplicate-template" data-template-id="{id}" title="Duplicate">
                    📋
                </button>
                <button class="btn-icon" data-action="edit-template" data-template-id="{id}" title="Edit">
                    ✏️
                </button>
                <button class="btn-icon" data-action="archive-template" data-template-id="{id}" title="Archive">
                    📦
                </button>
            </div>
        </div>
        
        <div class="template-card-content">
            <h4 class="template-name">{name}</h4>
            <p class="template-description">{description}</p>
            
            <div class="template-meta">
                <div class="template-field-count">
                    <span class="meta-icon">📝</span>
                    <span>{fieldCount} fields</span>
                </div>
                <div class="template-usage">
                    <span class="meta-icon">📊</span>
                    <span>{usageCount} uses</span>
                </div>
                <div class="template-updated">
                    <span class="meta-icon">🕒</span>
                    <span>{lastUpdated}</span>
                </div>
            </div>
            
            <div class="template-status {status}">
                {status}
            </div>
        </div>
        
        <div class="template-card-footer">
            <button class="btn btn-sm btn-secondary" data-action="preview-template" data-template-id="{id}">
                👁️ Preview
            </button>
            <button class="btn btn-sm btn-primary" data-action="use-template" data-template-id="{id}">
                🚀 Use Template
            </button>
        </div>
    </div>
</script>

<!-- List Item Template -->
<script type="text/template" id="template-list-item-template">
    <div class="template-list-item" data-template-id="{id}">
        <div class="template-item-info">
            <div class="template-item-header">
                <h4 class="template-item-name">{name}</h4>
                <div class="template-category-badge {category}">{category}</div>
                <div class="template-status-badge {status}">{status}</div>
            </div>
            <p class="template-item-description">{description}</p>
            <div class="template-item-meta">
                <span>📝 {fieldCount} fields</span>
                <span>📊 {usageCount} uses</span>
                <span>🕒 {lastUpdated}</span>
            </div>
        </div>
        
        <div class="template-item-actions">
            <button class="btn btn-sm btn-ghost" data-action="preview-template" data-template-id="{id}">
                👁️ Preview
            </button>
            <button class="btn btn-sm btn-secondary" data-action="edit-template" data-template-id="{id}">
                ✏️ Edit
            </button>
            <button class="btn btn-sm btn-primary" data-action="use-template" data-template-id="{id}">
                🚀 Use
            </button>
        </div>
    </div>
</script>

{{end}}

<!-- Template Builder Modal -->
{{template "template-builder-modal"}}