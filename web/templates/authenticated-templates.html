{{template "base" .}}
{{define "content"}}
<!-- Loading Screen -->
<div id="loading-screen" class="loading-screen">
    <div class="loading-spinner"></div>
    <h2>Site Inspection Manager</h2>
    <p>Loading...</p>
</div>

<!-- App Container -->
<div id="app" class="app-container" style="display: none;">
    <!-- Header Component -->
    {{template "header" .}}

    <!-- Navigation Component -->
    {{template "navigation" .}}

    <!-- Navigation Overlay -->
    <div id="nav-overlay" class="nav-overlay"></div>

    <!-- Main Content -->
    <main id="main-content" class="main-content">
        <!-- Templates Page -->
        <div id="templates-page" class="page active">
            <div class="page-header">
                <div class="page-header-content">
                    <div>
                        <h2>Templates</h2>
                        <p class="page-description">Create and manage inspection form templates</p>
                    </div>
                    <div class="page-header-actions">
                        <button class="btn btn-secondary" data-action="import-template">
                            üì• Import
                        </button>
                        <button class="btn btn-primary" data-action="open-template-builder">
                            ‚úèÔ∏è Create Template
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Template Stats -->
            <div class="component-grid grid-cols-4 component-spacing-lg">
                {{template "stat-card" dict
                    "ID" "total-templates-card"
                    "Icon" "üìã"
                    "IconColor" "primary"
                    "Value" "0"
                    "ValueColor" "primary"
                    "Label" "Total Templates"
                    "Trend" (dict "Direction" "neutral" "Value" "")
                }}
                
                {{template "stat-card" dict
                    "ID" "active-templates-card"
                    "Icon" "‚úÖ"
                    "IconColor" "success"
                    "Value" "0"
                    "ValueColor" "success"
                    "Label" "Active Templates"
                    "Trend" (dict "Direction" "up" "Value" "3")
                }}
                
                {{template "stat-card" dict
                    "ID" "draft-templates-card"
                    "Icon" "üìù"
                    "IconColor" "warning"
                    "Value" "0"
                    "ValueColor" "warning"
                    "Label" "Draft Templates"
                    "Trend" (dict "Direction" "neutral" "Value" "")
                }}
                
                {{template "stat-card" dict
                    "ID" "template-usage-card"
                    "Icon" "üìä"
                    "IconColor" "info"
                    "Value" "0"
                    "ValueColor" "info"
                    "Label" "This Month Usage"
                    "Trend" (dict "Direction" "up" "Value" "15%")
                }}
            </div>

            <!-- Filter and Search -->
            <div class="template-filters card">
                <div class="template-filter-row">
                    <div class="search-box">
                        <input type="text" id="template-search" placeholder="Search templates..." class="form-control">
                        <span class="search-icon">üîç</span>
                    </div>
                    
                    <div class="filter-group">
                        <select id="category-filter" class="form-control">
                            <option value="">All Categories</option>
                            <option value="safety">Safety</option>
                            <option value="quality">Quality</option>
                            <option value="environmental">Environmental</option>
                            <option value="equipment">Equipment</option>
                            <option value="maintenance">Maintenance</option>
                            <option value="compliance">Compliance</option>
                            <option value="commercial">Commercial</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <select id="status-filter" class="form-control">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="draft">Draft</option>
                            <option value="archived">Archived</option>
                        </select>
                    </div>
                    
                    <div class="view-toggle">
                        <button class="btn btn-sm" id="grid-view-btn" title="Grid View">‚äû</button>
                        <button class="btn btn-sm active" id="list-view-btn" title="List View">‚ò∞</button>
                    </div>
                </div>
            </div>

            <!-- Template Library Categories -->
            <div class="template-categories">
                <h3>Template Categories</h3>
                <div class="category-grid">
                    <div class="category-card" data-category="safety">
                        <div class="category-icon">ü¶∫</div>
                        <div class="category-name">Safety</div>
                        <div class="category-count">0 templates</div>
                    </div>
                    <div class="category-card" data-category="quality">
                        <div class="category-icon">‚úÖ</div>
                        <div class="category-name">Quality</div>
                        <div class="category-count">0 templates</div>
                    </div>
                    <div class="category-card" data-category="environmental">
                        <div class="category-icon">üå±</div>
                        <div class="category-name">Environmental</div>
                        <div class="category-count">0 templates</div>
                    </div>
                    <div class="category-card" data-category="equipment">
                        <div class="category-icon">‚öôÔ∏è</div>
                        <div class="category-name">Equipment</div>
                        <div class="category-count">0 templates</div>
                    </div>
                    <div class="category-card" data-category="maintenance">
                        <div class="category-icon">üîß</div>
                        <div class="category-name">Maintenance</div>
                        <div class="category-count">0 templates</div>
                    </div>
                    <div class="category-card" data-category="compliance">
                        <div class="category-icon">üìã</div>
                        <div class="category-name">Compliance</div>
                        <div class="category-count">0 templates</div>
                    </div>
                </div>
            </div>

            <!-- Templates List/Grid -->
            <div class="templates-container">
                <div class="templates-header">
                    <h3>Your Templates</h3>
                    <div class="templates-actions">
                        <button class="btn btn-sm btn-secondary" data-action="export-templates">
                            üì§ Export All
                        </button>
                        <button class="btn btn-sm btn-secondary" data-action="template-settings">
                            ‚öôÔ∏è Settings
                        </button>
                    </div>
                </div>
                
                <div id="templates-list" class="templates-list list-view">
                    <!-- Templates will be loaded here -->
                    <div class="templates-loading">
                        <div class="loading-spinner"></div>
                        <p>Loading templates...</p>
                    </div>
                </div>
                
                <div id="templates-empty" class="component-empty" style="display: none;">
                    <div class="component-empty-icon">üìã</div>
                    <div class="component-empty-message">No Templates Found</div>
                    <div class="component-empty-description">
                        Start by creating your first inspection template
                    </div>
                    <button class="btn btn-primary" data-action="open-template-builder">
                        ‚úèÔ∏è Create Your First Template
                    </button>
                </div>
            </div>

            <!-- Recent Activity -->
            {{template "base-card" dict
                "ShowHeader" true
                "Title" "üìä Template Activity"
                "HeaderActions" (list
                    (dict "Text" "View All" "Class" "btn-sm btn-secondary" "Action" "view-template-activity")
                )
                "Content" `<div id="template-activity" class="activity-feed">
                    <!-- Activity will be populated by JavaScript -->
                </div>`
            }}
        </div>

        <!-- Template Builder Modal -->
        {{template "template-builder-modal"}}
    </main>

    <!-- Floating Action Button -->
    <button id="fab" class="fab" aria-label="New Inspection">
        ‚ûï
    </button>
</div>

<!-- Notifications Container -->
<div id="notifications-container" class="notifications-container">
    <!-- Notifications will be inserted here -->
</div>

<!-- Modal Container -->
<div id="modal-container" class="modal-container">
    <!-- Modals will be inserted here -->
</div>
{{end}}

<!-- This will be filled by the specific page template -->